export default function initializeWebCodeExecutor(s){const l=document.getElementById("runCode");let u,m,y=500;return new Promise(t=>{const n=executorRootURL+"/_L2C_RESERVED_INDEX_.html";let o=!1,i,r=()=>{};window.addEventListener("message",e=>{"0"===e.data?o?i||(clearTimeout(m),i=!0,l.addEventListener("click",()=>c.executeFilesList(fileSystemManager.getBinaryFilesList(),()=>window.open(executorRootURL+s))),a(),t(c)):o=!0:"1"===e.data&&(a(),r())}),d(),function e(){m=setTimeout(()=>{o=i=c.ready=!1,document.body.removeChild(u),y+=1e3,d(),e()},y)}();const c={ready:!1,executeFilesList(e,t){if(this.ready){this.ready=!1,l.style.backgroundColor="#cccccc",r=t;for(const o of e)o[0]="/"+o[0].replaceAll(" ","/");u.contentWindow.postMessage(e,n)}}};return c;function d(){(u=document.createElement("iframe")).addEventListener("load",function e(){u.removeEventListener("load",e),u.src+=""}),u.setAttribute("src",n),u.style.display="none",document.body.appendChild(u)}function a(){c.ready=!0,l.style.backgroundColor="#4aff4a"}})}